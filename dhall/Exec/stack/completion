-- vim: filetype=dhall

let CommandWrapper = ../../CommandWrapper/Types.dhall

let stackYamlOption =
        ./stackYamlOption sha256:7579242492aacd52e17f76c0a07f2440f1ca690550746bbaba88bb970e2ddd30
      ? ./stackYamlOption

let optparse-applicative =
        ../completion/optparse-applicative sha256:00d877d341515117d8f20b93d7119bd0342ece43d2202e01f470db73f162cb44
      ? ../completion/optparse-applicative

in    λ ( options
        : { workingDirectory : Optional Text, stackYaml : Optional Text }
        )
    → λ(arguments : List Text)
    → λ(shell : CommandWrapper.Shell)
    → λ(index : Natural)
    → λ(words : List Text)
    → let completionCommand =
            optparse-applicative
              "stack"
              (stackYamlOption options.stackYaml # arguments)
              shell
              index
              words
      
      in      completionCommand
          //  { workingDirectory =
                  Optional/fold
                    Text
                    options.workingDirectory
                    (Optional Text)
                    (λ(_ : Text) → Some _)
                    completionCommand.workingDirectory
              }
